<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content=" I recently did this at work, and I decided to document the process here in the form of a how-to guide. Please note that I am not an expert, I am learning as I go along, so there may be mistakes.\nSdk-style project files have existed since net5, but when they were introduced they were made compatible with earlier versions of dotnet, such as dotnet framework 4.7.2. The kind of project files we were using before can now be called legacy-style project files.\nLegacy-style project files begin with &lt;Project ToolsVersion=&quot;... Sdk-style project files begin with &lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;. Sdk-style project files are necessary if you want to:\nStart using the dotnet command-line utility and all the functionality that it provides. Eventually migrate to a modern version of dotnet. ">
<title>Converting MSBuild project files from legacy-style to SDK-style</title>

<link rel='canonical' href='//localhost:1313/post/2023-09-05-sdk-style-msbuild-projects/'>

<link rel="stylesheet" href="/scss/style.min.21ef8ebc918342b23127db7e1cef326889b262bc982b25546ec94e1a9c73073b.css"><meta property='og:title' content="Converting MSBuild project files from legacy-style to SDK-style">
<meta property='og:description' content=" I recently did this at work, and I decided to document the process here in the form of a how-to guide. Please note that I am not an expert, I am learning as I go along, so there may be mistakes.\nSdk-style project files have existed since net5, but when they were introduced they were made compatible with earlier versions of dotnet, such as dotnet framework 4.7.2. The kind of project files we were using before can now be called legacy-style project files.\nLegacy-style project files begin with &lt;Project ToolsVersion=&quot;... Sdk-style project files begin with &lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;. Sdk-style project files are necessary if you want to:\nStart using the dotnet command-line utility and all the functionality that it provides. Eventually migrate to a modern version of dotnet. ">
<meta property='og:url' content='//localhost:1313/post/2023-09-05-sdk-style-msbuild-projects/'>
<meta property='og:site_name' content='Michael&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='how-to' /><meta property='article:tag' content='software-engineering' /><meta property='article:published_time' content='2023-09-05T10:45:31&#43;00:00'/><meta property='article:modified_time' content='2025-10-15T13:14:37&#43;02:00'/>
<meta name="twitter:title" content="Converting MSBuild project files from legacy-style to SDK-style">
<meta name="twitter:description" content=" I recently did this at work, and I decided to document the process here in the form of a how-to guide. Please note that I am not an expert, I am learning as I go along, so there may be mistakes.\nSdk-style project files have existed since net5, but when they were introduced they were made compatible with earlier versions of dotnet, such as dotnet framework 4.7.2. The kind of project files we were using before can now be called legacy-style project files.\nLegacy-style project files begin with &lt;Project ToolsVersion=&quot;... Sdk-style project files begin with &lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;. Sdk-style project files are necessary if you want to:\nStart using the dotnet command-line utility and all the functionality that it provides. Eventually migrate to a modern version of dotnet. ">
    <link rel="shortcut icon" href="/favicon.ico" />

      <script async src="https://www.googletagmanager.com/gtag/js?id=TODO"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'TODO');
        }
      </script>
    </head>
    <body class="
    article-page
     article-page">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
	
		
			<ol class="menu" id="main-menu">
				<li class="menu-bottom-section">
					<ol class="menu">
						
							<li id="dark-mode-toggle">
								<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



								<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



								<span>Dark Mode</span>
							</li>
						
					</ol>
				</li>
			</ol>
			

		<a href="/"><img src="/logo.svg" width="210" loading="lazy" alt="Logo"></a>

		
		
			
				<figure class="site-avatar">
					 <a href="/">
						
							<img src="https://gravatar.com/avatar/8d1c5b5578843f958430afe30e0cbb2fb5092b1712d1933ea37d7bf5cb4305ed?size=400" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
						
					</a>
					
				</figure>
			
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="//localhost:1313/">Michael&#39;s Blog</a></h1>
            <h2 class="site-description">&#34;If it&#39;s worth doing, it&#39;s worth doing right.&#34;</h2>
        </div>
    </header><ul class="menu-social">
            
                <li>
                    <a 
                        href='/contact-via-e-mail/'
                        
                        title="e-Mail"
                        rel="me"
                    >
                        
                        
                            <!--
category: Communication
tags: [inbox, gmail, email, envelope, message]
version: "1.0"
unicode: "eae5"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
  <path d="M3 7l9 6l9 -6" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='/contact-via-whatsapp/'
                        
                        title="WhatsApp"
                        rel="me"
                    >
                        
                        
                            <!--
tags: [logo, app, application, communication, text, messages, communicator, photos, images, videos, giphy]
category: Brand
version: "1.13"
unicode: "ec74"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
  <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/mikenakis'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <!--
tags: [logo, website, hosting, project, programming, software, development]
category: Brand
version: "1.18"
unicode: "ec1c"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.linkedin.com/in/mikenakis'
                        target="_blank"
                        title="LinkedIn"
                        rel="me"
                    >
                        
                        
                            <!--
tags: [logo, website, corporation, work, business, internet]
category: Brand
version: "1.15"
unicode: "ec8c"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M8 11v5" />
  <path d="M8 8v.01" />
  <path d="M12 16v-5" />
  <path d="M16 16v-3a2 2 0 1 0 -4 0" />
  <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://stackoverflow.com/users/773113/mike-nakis'
                        target="_blank"
                        title="Stack Overflow"
                        rel="me"
                    >
                        
                        
                            <!--
tags: [social, media, programming, website]
category: Brand
version: "1.43"
unicode: "ef58"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M4 17v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-1" />
  <path d="M8 16h8" />
  <path d="M8.322 12.582l7.956 .836" />
  <path d="M8.787 9.168l7.826 1.664" />
  <path d="M10.096 5.764l7.608 2.472" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/mikenakis'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <!--
tags: [logo, app, application, community, social, communication, website, user, post, images, photos, comment, feedback]
category: Brand
version: "1.18"
unicode: "ec27"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>

                        
                    </a>
                </li>
            
        </ul><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
            </ol>
        </li>
    </ol>
</aside>


    

            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">
</header><div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/2023-09-05-sdk-style-msbuild-projects/">Converting MSBuild project files from legacy-style to SDK-style</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2023-09-05 Tue 10:45:31 UTC</time>
            </div>
        

        
            <div>
                <!--
tags: [material, measure, time, timer, clock, sand]
version: "1.66"
category: System
unicode: "f146"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z" />
  <path d="M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z" />
</svg>

                <time class="article-time--reading">
                    7 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>


    <section class="article-content">
    
    
    <p><img src="/post/2023-09-05-sdk-style-msbuild-projects/images/legacy-style-csproj-to-sdk-style-csproj.png"
	width="1173"
	height="437"
	srcset="/post/2023-09-05-sdk-style-msbuild-projects/images/legacy-style-csproj-to-sdk-style-csproj_hu_fe261eca00e97a56.png 480w, /post/2023-09-05-sdk-style-msbuild-projects/images/legacy-style-csproj-to-sdk-style-csproj_hu_9994cb08165f7ca6.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="268"
		data-flex-basis="644px"
	
>
</p>
<p>I recently did this at work, and I decided to document the process here in the form of a how-to guide. Please note that I am not an expert, I am learning as I go along, so there may be mistakes.</p>
<p>Sdk-style project files have existed since net5, but when they were introduced they were made compatible with earlier versions of dotnet, such as dotnet framework 4.7.2. The kind of project files we were using before can now be called legacy-style project files.</p>
<ul>
<li>Legacy-style project files begin with <code>&lt;Project ToolsVersion=&quot;...</code></li>
<li>Sdk-style project files begin with <code>&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;</code>.</li>
</ul>
<p>Sdk-style project files are necessary if you want to:</p>
<ul>
<li>Start using the <code>dotnet</code> command-line utility and all the functionality that it provides.</li>
<li>Eventually migrate to a modern version of dotnet.</li>
</ul>
<p>Note: If your legacy project files are using packages.config, they first need to be converted to PackageReference-style. We live in the 3rd millennium, we should act like it. Converting from packages.config to PackageReference is beyond the scope of this guide.</p>
<p>Here are the steps I followed:</p>
<p>I replaced the <code>&lt;Project ToolsVersion=...</code> tag with <code>&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;</code>.</p>
<p>I replaced the <code>&lt;TargetFrameworkVersion&gt;v4.7.2&lt;/...</code> tag with <code>&lt;TargetFramework&gt;net472&lt;/...</code></p>
<p>I removed the following tags:</p>
<p><code>&lt;ProjectGuid&gt;</code><br>
<code>&lt;TargetFrameworkProfile&gt;</code><br>
<code>&lt;FileAlignment&gt;</code><br>
<code>&lt;AutoGenerateBindingRedirects&gt;</code><br>
<code>&lt;Deterministic&gt;</code><br>
<code>&lt;NuGetPackageImportStamp&gt;</code><br>
<code>&lt;AssemblyName&gt;</code><br>
<code>&lt;AppDesignerFolder&gt;</code><br>
<code>&lt;ProjectTypeGuids&gt;</code><br>
<code>&lt;XamlDebuggingInformation&gt;</code><br>
<code>&lt;Prefer32Bit&gt;</code><br>
<code>&lt;ErrorReport&gt;</code></p>
<p>I left the following tags as they were:</p>
<p><code>&lt;RootNamespace&gt;</code> (This is only necessary if the name of the project file does not exactly match the name of the root namespace.)<br>
<code>&lt;OutputType&gt;</code><br>
<code>&lt;StartupObject&gt;</code> (if any)<br>
<code>&lt;ApplicationIcon&gt;</code> (if any)<br>
<code>&lt;PlatformTarget&gt;</code></p>
<p>I added the following tags:</p>
<p><code>&lt;Platforms&gt;AnyCPU;x64&lt;/...</code><br>
<code>&lt;ImplicitUsings&gt;disable&lt;/...\ </code><Nullable>enable&lt;/&hellip;<br>
<code>&lt;TreatWarningsAsErrors&gt;True&lt;/...\ </code><NoWarn>NU1701;NU1702&lt;/&hellip;<code>' </code><UseWPF>true&lt;/&hellip;<code>(for a WPF project)\</code><UseWindowsForms>True&lt;/&hellip; (for a WPF project &ndash; don&rsquo;t ask.)</p>
<p>Then, I arrived at the most enjoyable part:</p>
<ul>
<li>Dozens upon dozens of <code>&lt;Reference Include=...&gt;</code> items for things like &ldquo;System&rdquo;, &ldquo;System.Data&rdquo;, &ldquo;System.Xml&rdquo; etc. were removed. A few had to stay, for example:
<ul>
<li>System.Printing</li>
<li>ReachFramework</li>
<li>System.IO.Compression</li>
<li>Microsoft.VisualBasic</li>
<li>System.ServiceProcess</li>
</ul>
</li>
<li>All <code>&lt;ProjectReference...&gt;</code> items became one-liners since neither project guid nor name is necessary anymore.</li>
<li>All <code>&lt;PackageReference...&gt;</code> items also became one-liners since the version does not have to be a nested tag, it can be an XML attribute.</li>
<li>Hundreds of lines of XML that reference individual .cs and .xaml files, as well as the associations between them, were removed. In our case this resulted in a 12:1 reduction in project file size.</li>
<li>References to included resources stayed of course, as well as references to anything else that needs special handling.</li>
<li>The importing of Microsoft.common.props and Microsoft.CSharp.targets was removed.</li>
</ul>
<p>Once this is done, or even while doing it, various problems popped up, which I had to address. For example:</p>
<ul>
<li>At some point Visual Studio started skipping the building of a project, so the projects that depended on it would fail. If I tried to clean that project, Visual Studio would again skip that project, so it would not do any cleaning. Forcibly cleaning by deleting all the bin and obj directories had no effect; restarting Visual Studio had no effect; enabling more verbose build output (even diagnostic-level) did not reveal the slightest hint as to why Visual Studio was skipping the project. That was very frustrating. After some googling around, gathering a list of magical incantations, and trying them one after the other, the one that worked for me was unloading the project and then reloading it.</li>
<li>At some point I was receiving an error telling me that one of my WPF applications was missing a &ldquo;Main&rdquo; entry point. However, its project file was for all practical purposes identical to the project file of another WPF application that was building just fine, and suffice it to say, neither of the two applications had a &ldquo;Main&rdquo; entry point. As it turns out, the application object must be called &ldquo;App.xaml.cs&rdquo; and &ldquo;App.xaml&rdquo;; if you rename it, the magic does not work anymore, or perhaps it needs an <code>&lt;ApplicationDefinition Include=&quot;MyCustomApp.xaml&quot; /&gt;</code> in order to work.</li>
<li>At some point Visual Studio was launching one of my console applications passing it all of its command-line arguments twice. Visual Studio stopped doing that after it was restarted.</li>
<li>You may encounter different problems, or even if you encounter problems that seem similar, you may need different magical incantations to overcome them.</li>
</ul>
<hr>
<p>Once the above was done, it was time to try building. I did not really expect it to build, and in fact it did not build. There were a number of problems that needed to addressed on a case-by-case basis. Here are the build problems that I encountered, and how I solved them.</p>
<p><strong>Build Problem: Referencing standard assemblies.</strong></p>
<p>It turns out that in SDK-style projects not only we do not have to reference standard assemblies anymore, but we must actually refrain from referencing them. In our case this was fixed by editing our project file and removing the entire <code>&lt;ItemGroup&gt;</code> with items like <code>&lt;Reference Include=&quot;System&quot; /&gt;</code> and <code>&lt;Reference Include=&quot;System.Xml&quot; /&gt;</code> and the like.</p>
<p><strong>Build Problem: Duplicate attributes in AssemblyInfo.cs</strong></p>
<p>Most of the assembly attributes defined in AssemblyInfo.cs were causing duplicate attribute errors, because in SDK-style projects these are automagically generated for us. The solution was to remove those attributes.</p>
<p><strong>Build Problem: PresentationUI assembly not found</strong></p>
<p>This is a very strange problem which I was unable to either understand or properly solve. It may be related to the following discussions:</p>
<p>github/dotnet/wpf: <a class="external" 
   href="https://github.com/dotnet/wpf/issues/1423" target="_blank"
   >&ldquo;PresentationUI ref-assembly missing: Build fails because cannot find type PresentationUIStyleResources&rdquo;</a></p>
<p>github/dotnet/runtime: <a class="external" 
   href="https://github.com/dotnet/runtime/issues/3651" target="_blank"
   >&ldquo;WPF has removed PresentationUI ref assembly&rdquo;</a></p>
<p>Luckily, the assembly was not necessary, so I was able to remove it without losing any functionality.</p>
<p><strong>Build Problem: Other assemblies not found</strong></p>
<p>This is another strange thing which I was also unable to understand.  Examples of assemblies that could not be found anymore: Microsoft.Bcl.HashCode, System.Collections.Immutable, and JetBrains.Annotations.</p>
<p>I solved this problem by simply avoiding the use of those assemblies and either forfeiting their functionality or implementing it by myself.</p>
<ul>
<li>System.HashCode was very easy to re-implement.</li>
<li>System.Collections.Immutable turned out to be unnecessary.</li>
<li>JetBrains.Annotations turned out to also be unnecessary.</li>
</ul>
<hr>
<p>Once the build problems were resolved, it was time to try running. Again, I did not expect the application to run, and in fact it did not run. Here are the runtime problems I encountered, and how I resolved them.</p>
<p><strong>Runtime Problem: Accessing native DLLs</strong></p>
<p>In our project we have a few natives DLLs which would fail to load under the SDK-style project.</p>
<ul>
<li>
<p>In one case, the solution was to modify the code that loads the DLL to look for it not only in <code>bin\x64\Debug</code> but also in <code>bin\x64\Debug\runtimes\win-x64\native</code> and in <code>bin\x64\Debug\runtimes\win-x64</code>.</p>
</li>
<li>
<p>In another case, the solution was to add <code>&lt;AppendTargetFrameworkToOutputPath&gt;False&lt;/...</code> to the project file.</p>
</li>
<li>
<p>In another case, the solution was to add the following tags to the project file:</p>
<p><code>&lt;RuntimeIdentifiers&gt;win-x64&lt;/...</code>
<code>&lt;RuntimeIdentifier&gt;win-x64&lt;/...</code></p>
</li>
<li>
<p>And in an especially difficult case, the solution was to add a post-build step which copies everything from <code>bin\x64\Debug\runtimes\win-x64\native</code> to <code>bin\x64\Debug</code>.</p>
</li>
</ul>
<p><strong>Runtime Problem: Custom-built resources</strong></p>
<p>In my application I have icons in SVG format. WPF has no built-in support for SVG, so conversion of SVG to XAML is necessary. A long time ago I decided to handle this as follows:</p>
<p>I added a custom build target that would convert the SVG files to XAML during build, then these XAML files would be included as resources into my application in a kind of mysterious way which I did not quite understand myself, and then my application would have access to the icons as XAML.</p>
<p>It is no surprise that clunky tricks like this break when you try to make a significant change, such as change the style of the project files. In our case, the custom build target did in fact run, but the XAML files that it generated were not being magically included as resources in our application anymore, so all of those icons failed to load, and they were completely blank on the screen. Furthermore, I had no idea how to fix this, and becoming an expert in this monstrosity known as MSBuild was not in my immediate or even long-term goals.</p>
<p>The solution was to ditch the svg-to-xaml build target, to include the original SVG files as resources into the application, and to do the necessary conversions from SVG to XAML at runtime.</p>
<p><strong>Runtime Problem: no splash-screen</strong></p>
<p>The solution to this problem, (which is described here: <a class="external" 
   href="https://stackoverflow.com/a/62141464/773113" target="_blank"
   >https://stackoverflow.com/a/62141464/773113</a>) was to write a couple of lines of code in <code>Application.OnStartup()</code> to create the splash-screen myself.</p>
<hr>
<p>Once all of the runtime problems were resolved, I was able to perform the following additional improvements:</p>
<p>Replaced a whole bunch of resource-include statements like <code>&lt;Resource Include=&quot;Art/Icon/Checkmark.svg&quot; /&gt;</code> with a single resource include statement: <code>&lt;Resource Include=&quot;Art/Icon/\*.svg&quot; /&gt;</code>. (And if I wanted to include all SVG files under <code>Art</code>, I could have used <code>&lt;Resource Include=&quot;Art/**/*.svg&quot; /&gt;</code>)</p>
<hr>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/how-to/">How-To</a>
        
            <a href="/tags/software-engineering/">Software-Engineering</a>
        
    </section>


    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            Last updated on 2025-10-15 Wed 13:14:37 CEST
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/post/2024-06-visual-studio-solutions/">
        
        

        <div class="article-details">
            <h2 class="article-title">How to organize a Visual Studio Solution</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/2024-05-simplification-of-triple-choice-prompts/">
        
        

        <div class="article-details">
            <h2 class="article-title">Simplification of triple-choice prompts to dual-choice</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/2023-07-21-migrating-project-from-dotnet-framework/">
        
        

        <div class="article-details">
            <h2 class="article-title">Migrating a project from DotNet Framework 4-7-2 to DotNet 7</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/2023-06-12-the-trouble-with-xaml-hot-reload-in-wpf/">
        
        

        <div class="article-details">
            <h2 class="article-title">The Trouble with XAML Hot Reload in WPF</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 2001 - 2025 Michael Belivanakis (a.k.a. Mike Nakis)
    </section>
    
    <section class="powerby">
        Made using <b><a href="https://obsidian.md" target="_blank">Obsidian</a></b> and <b><a href="https://gohugo.io/" target="_blank">Hugo</a></b><br />
        Theme based on <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" data-version="%s">hugo-theme-stack</a></b> by <a href="https://jimmycai.com" target="_blank">Jimmy Cai</a><br />
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.f2c01864f0b68886d640021e561a9182ddc2c60846b5b64ea7a6069cbe8a17ed.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
